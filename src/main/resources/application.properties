# Spring Boot Configuration
spring.application.name=translation-call-app
server.port=8080

# Database Configuration (H2 for development, PostgreSQL for production)
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.h2.console.enabled=true
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# Twilio Configuration  
twilio.account.sid=${TWILIO_ACCOUNT_SID}
twilio.auth.token=${TWILIO_AUTH_TOKEN}
twilio.phone.number=${TWILIO_PHONE_NUMBER}
twilio.api.key=${TWILIO_API_KEY:}
twilio.api.secret=${TWILIO_API_SECRET:}
twilio.twiml.app.sid=${TWILIO_TWIML_APP_SID:}

# Webhook Configuration - Critical for fixing 404 errors
app.webhook.base.url=${APP_WEBHOOK_BASE_URL:https://talktranslate-backend-production.up.railway.app}
twilio.webhook.base.url=${TWILIO_WEBHOOK_BASE_URL:https://talktranslate-backend-production.up.railway.app}

# OpenAI Configuration
openai.api.key=${OPENAI_API_KEY:your-openai-api-key-here}
openai.model=${OPENAI_MODEL:gpt-3.5-turbo}
openai.max.tokens=${OPENAI_MAX_TOKENS:150}
openai.temperature=${OPENAI_TEMPERATURE:0.3}

# Application URLs - Use Railway domain
app.base.url=${APP_BASE_URL:https://talktranslate-backend-production.up.railway.app}
app.websocket.stream-url=${APP_WEBSOCKET_URL:wss://talktranslate-backend-production.up.railway.app/translation-stream}

# Translation Configuration
translation.default.source.language=en
translation.default.target.language=es
translation.confidence.threshold=0.8
translation.max.retry.attempts=3

# Conference Configuration
conference.max.participants=10
conference.default.timeout.minutes=60
conference.cleanup.interval.minutes=30
conference.max.age.hours=24

# Security Configuration
security.webhook.validation.enabled=true
security.cors.allowed.origins=https://talktranslate.app,http://localhost:3000
security.cors.allowed.methods=GET,POST,PUT,DELETE,OPTIONS
security.cors.allowed.headers=*

# Logging Configuration
logging.level.com.example.translationcallapp=INFO
logging.level.com.twilio=WARN
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Actuator Configuration for Health Checks
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true

# Server Configuration
server.servlet.context-path=/
server.error.include-stacktrace=never
server.error.include-message=always
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# HTTP Configuration
server.tomcat.max-threads=200
server.tomcat.min-spare-threads=10
server.tomcat.connection-timeout=20000
server.tomcat.keep-alive-timeout=60000

# SSL Configuration (for production)
server.ssl.enabled=false
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=changeit
# server.ssl.key-store-type=PKCS12

# WebSocket Configuration
websocket.max.session.idle.timeout=300000
websocket.max.text.message.buffer.size=8192
websocket.max.binary.message.buffer.size=8192

# Async Configuration
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=translation-

# Cache Configuration
spring.cache.type=simple
spring.cache.cache-names=conferences,tokens,translations
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=1h

# Retry Configuration
retry.max.attempts=3
retry.initial.delay=1000
retry.multiplier=2.0
retry.max.delay=10000

# Rate Limiting
rate.limit.requests.per.minute=60
rate.limit.webhook.requests.per.minute=120

# Development/Debug Configuration
debug=${DEBUG:false}
trace=${TRACE:false}
spring.output.ansi.enabled=always